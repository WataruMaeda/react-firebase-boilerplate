{"ast":null,"code":"import _defineProperty from \"/Users/wmaeda/Documents/me/Web/react-firebase-boilerplate/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/wmaeda/Documents/me/Web/react-firebase-boilerplate/src/scenes/auth/Profile/Profile.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Input from '../../../components/Input';\nimport { styler, colors, images } from '../../../theme';\nimport { Button } from '../../../components/Button';\nimport FilePicker from '../../../components/FilePicker';\nimport Error from '../../../components/Error';\nimport { path } from '../../../utils/const'; // import { storage } from '../../../utils/firebase'\n\nimport Connector from '../../../utils/connector';\nimport { validate, tests } from '../../../utils/vali';\nconst styles = styler({\n  root: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  contents: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '80%'\n  },\n  centerRow: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  title: {\n    color: colors.yellow,\n    fontSize: 24,\n    marginBottom: 40\n  },\n  file: {\n    fontSize: 16,\n    textDecoration: 'underline',\n    color: colors.yellow,\n    '&:hover': {\n      color: colors.orange\n    }\n  },\n  img: {\n    width: 120,\n    height: 120,\n    objectFit: 'cover',\n    borderRadius: 60,\n    marginBottom: 30\n  },\n  footer: {\n    marginTop: 80,\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  btn: {\n    height: 50,\n    width: '45%',\n    fontSize: 16,\n    fontWeight: 'bold',\n    borderRadius: 10,\n    '&::before': {\n      borderRadius: 10\n    },\n    '&:hover::before': {\n      borderRadius: 10\n    }\n  }\n});\nconst customTests = {\n  userName: {\n    test: tests.input.test,\n    error: 'Please enter a valid user name'\n  }\n};\n\nclass Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      file: null,\n      userImage: images.profile,\n      userName: '',\n      errors: {},\n      resErr: null,\n      isLoading: false\n    };\n\n    this.handleInputChange = ({\n      target\n    }) => {\n      const name = target.name,\n            value = target.value;\n      const errors = this.state.errors;\n      this.setState({\n        [name]: value,\n        errors: _objectSpread({}, errors, {\n          [name]: ''\n        })\n      });\n    };\n\n    this.onSubmit = () => {\n      // validation\n      const isLoading = this.state.isLoading;\n\n      const _validate = validate(this.state, customTests),\n            isError = _validate.isError,\n            errors = _validate.errors;\n\n      this.setState({\n        errors\n      });\n      if (isError || isLoading) return; // update me\n\n      this.setState({\n        isLoading: true,\n        resErr: null\n      });\n      const _this$props = this.props,\n            actions = _this$props.actions,\n            history = _this$props.history;\n      const _this$state = this.state,\n            userName = _this$state.userName,\n            userImage = _this$state.userImage;\n      actions.updateMe(userName, userImage).then(() => {\n        this.setState({\n          resErr: null,\n          isLoading: false\n        });\n      }).catch(err => {\n        this.setState({\n          resErr: err.message,\n          isLoading: false\n        });\n      });\n    };\n  }\n\n  componentWillMount() {// set default image\n    // storage.child('default/profile.png').getDownloadURL().then((url) => {\n    //  this.setState({ userImage: url })\n    // })\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          history = _this$props2.history,\n          me = _this$props2.me; // if (!me) return <Redirect to=\"/\" />\n\n    const _this$state2 = this.state,\n          userName = _this$state2.userName,\n          userImage = _this$state2.userImage,\n          errors = _this$state2.errors,\n          resErr = _this$state2.resErr,\n          isLoading = _this$state2.isLoading;\n    return React.createElement(\"div\", {\n      className: styles.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Error, {\n      message: resErr,\n      onClose: () => {\n        this.setState({\n          resErr: null\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: styles.contents,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: styles.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\"), React.createElement(\"div\", {\n      className: styles.centerRow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: typeof userImage === 'object' ? URL.createObjectURL(userImage) : userImage,\n      className: styles.img,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(FilePicker, {\n      maxSize: 300000,\n      onSelect: f => this.setState({\n        userImage: f,\n        resErr: null\n      }),\n      onError: () => this.setState({\n        resErr: 'Please select an image less than 300kb'\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: styles.file,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Set Profile Image\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })), React.createElement(Input, {\n      type: \"text\",\n      name: \"userName\",\n      label: \"User Name\",\n      value: userName,\n      placeholder: \"\",\n      onChange: this.handleInputChange,\n      error: errors.userName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: styles.footer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(Button, {\n      label: \"Back\",\n      className: \"btn-orange-outline \".concat(styles.btn),\n      onClick: () => history.goBack(),\n      display: isLoading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(Button, {\n      label: \"Create Account\",\n      className: \"btn-yellow-gradation \".concat(styles.btn),\n      onClick: this.onSubmit,\n      isLoading: isLoading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst ConnectedProfile = props => React.createElement(Connector, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 186\n  },\n  __self: this\n}, ({\n  actions,\n  state: {\n    app: {\n      me\n    }\n  }\n}) => React.createElement(Profile, Object.assign({\n  me: me,\n  actions: actions.app\n}, props, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 189\n  },\n  __self: this\n})));\n\nProfile.propTypes = {};\nProfile.defaultProps = {};\nexport default ConnectedProfile;","map":{"version":3,"sources":["/Users/wmaeda/Documents/me/Web/react-firebase-boilerplate/src/scenes/auth/Profile/Profile.js"],"names":["React","Component","Redirect","Input","styler","colors","images","Button","FilePicker","Error","path","Connector","validate","tests","styles","root","flex","display","flexDirection","justifyContent","alignItems","contents","width","centerRow","title","color","yellow","fontSize","marginBottom","file","textDecoration","orange","img","height","objectFit","borderRadius","footer","marginTop","btn","fontWeight","customTests","userName","test","input","error","Profile","state","userImage","profile","errors","resErr","isLoading","handleInputChange","target","name","value","setState","onSubmit","isError","props","actions","history","updateMe","then","catch","err","message","componentWillMount","render","me","URL","createObjectURL","f","goBack","ConnectedProfile","app","propTypes","defaultProps"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,2BAAlB;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,MAAzB,QAAuC,gBAAvC;AACA,SAASC,MAAT,QAAuB,4BAAvB;AACA,OAAOC,UAAP,MAAuB,gCAAvB;AACA,OAAOC,KAAP,MAAkB,2BAAlB;AACA,SAASC,IAAT,QAAqB,sBAArB,C,CACA;;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,SAASC,QAAT,EAAmBC,KAAnB,QAAgC,qBAAhC;AAEA,MAAMC,MAAM,GAAGV,MAAM,CAAC;AACpBW,EAAAA,IAAI,EAAE;AACJC,IAAAA,IAAI,EAAE,CADF;AAEJC,IAAAA,OAAO,EAAE,MAFL;AAGJC,IAAAA,aAAa,EAAE,QAHX;AAIJC,IAAAA,cAAc,EAAE,QAJZ;AAKJC,IAAAA,UAAU,EAAE;AALR,GADc;AAQpBC,EAAAA,QAAQ,EAAE;AACRJ,IAAAA,OAAO,EAAE,MADD;AAERC,IAAAA,aAAa,EAAE,QAFP;AAGRI,IAAAA,KAAK,EAAE;AAHC,GARU;AAapBC,EAAAA,SAAS,EAAE;AACTN,IAAAA,OAAO,EAAE,MADA;AAETC,IAAAA,aAAa,EAAE,QAFN;AAGTC,IAAAA,cAAc,EAAE,QAHP;AAITC,IAAAA,UAAU,EAAE;AAJH,GAbS;AAmBpBI,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAEpB,MAAM,CAACqB,MADT;AAELC,IAAAA,QAAQ,EAAE,EAFL;AAGLC,IAAAA,YAAY,EAAE;AAHT,GAnBa;AAwBpBC,EAAAA,IAAI,EAAE;AACJF,IAAAA,QAAQ,EAAE,EADN;AAEJG,IAAAA,cAAc,EAAE,WAFZ;AAGJL,IAAAA,KAAK,EAAEpB,MAAM,CAACqB,MAHV;AAIJ,eAAW;AACTD,MAAAA,KAAK,EAAEpB,MAAM,CAAC0B;AADL;AAJP,GAxBc;AAgCpBC,EAAAA,GAAG,EAAE;AACHV,IAAAA,KAAK,EAAE,GADJ;AAEHW,IAAAA,MAAM,EAAE,GAFL;AAGHC,IAAAA,SAAS,EAAE,OAHR;AAIHC,IAAAA,YAAY,EAAE,EAJX;AAKHP,IAAAA,YAAY,EAAE;AALX,GAhCe;AAuCpBQ,EAAAA,MAAM,EAAE;AACNC,IAAAA,SAAS,EAAE,EADL;AAENpB,IAAAA,OAAO,EAAE,MAFH;AAGNE,IAAAA,cAAc,EAAE;AAHV,GAvCY;AA4CpBmB,EAAAA,GAAG,EAAE;AACHL,IAAAA,MAAM,EAAE,EADL;AAEHX,IAAAA,KAAK,EAAE,KAFJ;AAGHK,IAAAA,QAAQ,EAAE,EAHP;AAIHY,IAAAA,UAAU,EAAE,MAJT;AAKHJ,IAAAA,YAAY,EAAE,EALX;AAMH,iBAAa;AACXA,MAAAA,YAAY,EAAE;AADH,KANV;AASH,uBAAmB;AACjBA,MAAAA,YAAY,EAAE;AADG;AAThB;AA5Ce,CAAD,CAArB;AA2DA,MAAMK,WAAW,GAAG;AAClBC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,IAAI,EAAE7B,KAAK,CAAC8B,KAAN,CAAYD,IADV;AAERE,IAAAA,KAAK,EAAE;AAFC;AADQ,CAApB;;AAOA,MAAMC,OAAN,SAAsB5C,SAAtB,CAAgC;AAAA;AAAA;AAAA,SAC9B6C,KAD8B,GACtB;AACNjB,MAAAA,IAAI,EAAE,IADA;AAENkB,MAAAA,SAAS,EAAEzC,MAAM,CAAC0C,OAFZ;AAGNP,MAAAA,QAAQ,EAAE,EAHJ;AAINQ,MAAAA,MAAM,EAAE,EAJF;AAKNC,MAAAA,MAAM,EAAE,IALF;AAMNC,MAAAA,SAAS,EAAE;AANL,KADsB;;AAAA,SAiB9BC,iBAjB8B,GAiBV,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAgB;AAAA,YAC1BC,IAD0B,GACVD,MADU,CAC1BC,IAD0B;AAAA,YACpBC,KADoB,GACVF,MADU,CACpBE,KADoB;AAAA,YAE1BN,MAF0B,GAEf,KAAKH,KAFU,CAE1BG,MAF0B;AAIlC,WAAKO,QAAL,CAAc;AACZ,SAACF,IAAD,GAAQC,KADI;AAEZN,QAAAA,MAAM,oBACDA,MADC;AAEJ,WAACK,IAAD,GAAQ;AAFJ;AAFM,OAAd;AAOD,KA5B6B;;AAAA,SA8B9BG,QA9B8B,GA8BnB,MAAM;AACf;AADe,YAEPN,SAFO,GAEO,KAAKL,KAFZ,CAEPK,SAFO;;AAAA,wBAGavC,QAAQ,CAAC,KAAKkC,KAAN,EAAaN,WAAb,CAHrB;AAAA,YAGPkB,OAHO,aAGPA,OAHO;AAAA,YAGET,MAHF,aAGEA,MAHF;;AAIf,WAAKO,QAAL,CAAc;AAAEP,QAAAA;AAAF,OAAd;AACA,UAAIS,OAAO,IAAIP,SAAf,EAA0B,OALX,CAOf;;AACA,WAAKK,QAAL,CAAc;AAAEL,QAAAA,SAAS,EAAE,IAAb;AAAmBD,QAAAA,MAAM,EAAE;AAA3B,OAAd;AARe,0BASc,KAAKS,KATnB;AAAA,YASPC,OATO,eASPA,OATO;AAAA,YASEC,OATF,eASEA,OATF;AAAA,0BAUiB,KAAKf,KAVtB;AAAA,YAUPL,QAVO,eAUPA,QAVO;AAAA,YAUGM,SAVH,eAUGA,SAVH;AAWfa,MAAAA,OAAO,CAACE,QAAR,CAAiBrB,QAAjB,EAA2BM,SAA3B,EAAsCgB,IAAtC,CAA2C,MAAM;AAC/C,aAAKP,QAAL,CAAc;AAAEN,UAAAA,MAAM,EAAE,IAAV;AAAgBC,UAAAA,SAAS,EAAE;AAA3B,SAAd;AACD,OAFD,EAEGa,KAFH,CAESC,GAAG,IAAI;AACd,aAAKT,QAAL,CAAc;AAAEN,UAAAA,MAAM,EAAEe,GAAG,CAACC,OAAd;AAAuBf,UAAAA,SAAS,EAAE;AAAlC,SAAd;AACD,OAJD;AAKD,KA9C6B;AAAA;;AAU9BgB,EAAAA,kBAAkB,GAAG,CACnB;AACA;AACA;AACA;AACD;;AAiCDC,EAAAA,MAAM,GAAG;AAAA,yBACiB,KAAKT,KADtB;AAAA,UACCE,OADD,gBACCA,OADD;AAAA,UACUQ,EADV,gBACUA,EADV,EAEP;;AAFO,yBAIoD,KAAKvB,KAJzD;AAAA,UAICL,QAJD,gBAICA,QAJD;AAAA,UAIWM,SAJX,gBAIWA,SAJX;AAAA,UAIsBE,MAJtB,gBAIsBA,MAJtB;AAAA,UAI8BC,MAJ9B,gBAI8BA,MAJ9B;AAAA,UAIsCC,SAJtC,gBAIsCA,SAJtC;AAKP,WACE;AAAK,MAAA,SAAS,EAAErC,MAAM,CAACC,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AACE,MAAA,OAAO,EAAEmC,MADX;AAEE,MAAA,OAAO,EAAE,MAAM;AACb,aAAKM,QAAL,CAAc;AAAEN,UAAAA,MAAM,EAAE;AAAV,SAAd;AACD,OAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOE;AAAK,MAAA,SAAS,EAAEpC,MAAM,CAACO,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAEP,MAAM,CAACU,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADF,EAEE;AAAK,MAAA,SAAS,EAAEV,MAAM,CAACS,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,GAAG,EAAE,OAAOwB,SAAP,KAAqB,QAArB,GAAgCuB,GAAG,CAACC,eAAJ,CAAoBxB,SAApB,CAAhC,GAAiEA,SADxE;AAEE,MAAA,SAAS,EAAEjC,MAAM,CAACkB,GAFpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAKE,oBAAC,UAAD;AACE,MAAA,OAAO,EAAE,MADX;AAEE,MAAA,QAAQ,EAAEwC,CAAC,IAAI,KAAKhB,QAAL,CAAc;AAAET,QAAAA,SAAS,EAAEyB,CAAb;AAAgBtB,QAAAA,MAAM,EAAE;AAAxB,OAAd,CAFjB;AAGE,MAAA,OAAO,EAAE,MAAM,KAAKM,QAAL,CAAc;AAAEN,QAAAA,MAAM,EAAE;AAAV,OAAd,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKE;AAAG,MAAA,SAAS,EAAEpC,MAAM,CAACe,IAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BALF,CALF,EAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZF,CAFF,EAgBE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,KAAK,EAAC,WAHR;AAIE,MAAA,KAAK,EAAEY,QAJT;AAKE,MAAA,WAAW,EAAC,EALd;AAME,MAAA,QAAQ,EAAE,KAAKW,iBANjB;AAOE,MAAA,KAAK,EAAEH,MAAM,CAACR,QAPhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBF,EAyBE;AAAK,MAAA,SAAS,EAAE3B,MAAM,CAACsB,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,KAAK,EAAC,MADR;AAEE,MAAA,SAAS,+BAAwBtB,MAAM,CAACwB,GAA/B,CAFX;AAGE,MAAA,OAAO,EAAE,MAAMuB,OAAO,CAACY,MAAR,EAHjB;AAIE,MAAA,OAAO,EAAEtB,SAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOE,oBAAC,MAAD;AACE,MAAA,KAAK,EAAC,gBADR;AAEE,MAAA,SAAS,iCAA0BrC,MAAM,CAACwB,GAAjC,CAFX;AAGE,MAAA,OAAO,EAAE,KAAKmB,QAHhB;AAIE,MAAA,SAAS,EAAEN,SAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,CAzBF,CAPF,CADF;AAkDD;;AAvG6B;;AA0GhC,MAAMuB,gBAAgB,GAAGf,KAAK,IAC5B,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAEI,CAAC;AAAEC,EAAAA,OAAF;AAAWd,EAAAA,KAAK,EAAE;AAAE6B,IAAAA,GAAG,EAAE;AAAEN,MAAAA;AAAF;AAAP;AAAlB,CAAD,KACE,oBAAC,OAAD;AACE,EAAA,EAAE,EAAEA,EADN;AAEE,EAAA,OAAO,EAAET,OAAO,CAACe;AAFnB,GAGMhB,KAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAHN,CADF;;AAcAd,OAAO,CAAC+B,SAAR,GAAoB,EAApB;AACA/B,OAAO,CAACgC,YAAR,GAAuB,EAAvB;AAEA,eAAeH,gBAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport Input from '../../../components/Input'\nimport { styler, colors, images } from '../../../theme'\nimport { Button } from '../../../components/Button'\nimport FilePicker from '../../../components/FilePicker'\nimport Error from '../../../components/Error'\nimport { path } from '../../../utils/const'\n// import { storage } from '../../../utils/firebase'\nimport Connector from '../../../utils/connector'\nimport { validate, tests } from '../../../utils/vali'\n\nconst styles = styler({\n  root: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  contents: {\n    display: 'flex',  \n    flexDirection: 'column',\n    width: '80%',\n  },\n  centerRow: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  title: {\n    color: colors.yellow,\n    fontSize: 24,\n    marginBottom: 40,\n  },\n  file: {\n    fontSize: 16,\n    textDecoration: 'underline',\n    color: colors.yellow,\n    '&:hover': {\n      color: colors.orange,\n    },\n  },\n  img: {\n    width: 120,\n    height: 120,\n    objectFit: 'cover',\n    borderRadius: 60,\n    marginBottom: 30,\n  },\n  footer: {\n    marginTop: 80,\n    display: 'flex',\n    justifyContent: 'space-between',\n  },\n  btn: {\n    height: 50,\n    width: '45%',\n    fontSize: 16,\n    fontWeight: 'bold',\n    borderRadius: 10,\n    '&::before': {\n      borderRadius: 10,\n    },\n    '&:hover::before': {\n      borderRadius: 10,\n    },\n  },\n})\n\nconst customTests = {\n  userName: {\n    test: tests.input.test,\n    error: 'Please enter a valid user name'\n  },\n}\n\nclass Profile extends Component {\n  state = {\n    file: null,\n    userImage: images.profile,\n    userName: '',\n    errors: {},\n    resErr: null,\n    isLoading: false,\n  }\n\n  componentWillMount() {\n    // set default image\n    // storage.child('default/profile.png').getDownloadURL().then((url) => {\n    //  this.setState({ userImage: url })\n    // })\n  }\n\n  handleInputChange = ({ target }) => {\n    const { name, value } = target\n    const { errors } = this.state\n\n    this.setState({\n      [name]: value,\n      errors: {\n        ...errors,\n        [name]: '',\n      },\n    })\n  }\n\n  onSubmit = () => {\n    // validation\n    const { isLoading } = this.state\n    const { isError, errors } = validate(this.state, customTests)\n    this.setState({ errors })\n    if (isError || isLoading) return\n\n    // update me\n    this.setState({ isLoading: true, resErr: null })\n    const { actions, history } = this.props\n    const { userName, userImage } = this.state\n    actions.updateMe(userName, userImage).then(() => {\n      this.setState({ resErr: null, isLoading: false })\n    }).catch(err => {\n      this.setState({ resErr: err.message, isLoading: false })\n    }) \n  }\n\n  render() {\n    const { history, me } = this.props\n    // if (!me) return <Redirect to=\"/\" />\n\n    const { userName, userImage, errors, resErr, isLoading } = this.state\n    return (\n      <div className={styles.root}>\n        <Error\n          message={resErr}\n          onClose={() => {\n            this.setState({ resErr: null })\n          }}\n        />\n        <div className={styles.contents}>\n          <h3 className={styles.title}>プロフィール</h3>\n          <div className={styles.centerRow}>\n            <img\n              src={typeof userImage === 'object' ? URL.createObjectURL(userImage) : userImage}\n              className={styles.img}\n            />\n            <FilePicker\n              maxSize={300000}\n              onSelect={f => this.setState({ userImage: f, resErr: null })}\n              onError={() => this.setState({ resErr: 'Please select an image less than 300kb' })}\n            >\n              <p className={styles.file}>Set Profile Image</p>\n            </FilePicker>\n            <br />\n          </div>\n          <Input\n            type=\"text\"\n            name=\"userName\"\n            label=\"User Name\"\n            value={userName}\n            placeholder=\"\"\n            onChange={this.handleInputChange}\n            error={errors.userName}\n          />\n          <div className={styles.footer}>\n            <Button\n              label=\"Back\"\n              className={`btn-orange-outline ${styles.btn}`}\n              onClick={() => history.goBack()}\n              display={isLoading}\n            />\n            <Button\n              label=\"Create Account\"\n              className={`btn-yellow-gradation ${styles.btn}`}\n              onClick={this.onSubmit}\n              isLoading={isLoading}\n            />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst ConnectedProfile = props => (\n  <Connector>\n    {\n      ({ actions, state: { app: { me } } }) => (\n        <Profile\n          me={me}\n          actions={actions.app}\n          {...props}\n        />\n      )\n    }\n  </Connector>\n)\n\nProfile.propTypes = {}\nProfile.defaultProps = {}\n\nexport default ConnectedProfile\n"]},"metadata":{},"sourceType":"module"}